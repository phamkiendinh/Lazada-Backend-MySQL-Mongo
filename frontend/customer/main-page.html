<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Main Page</title>
        <link rel="stylesheet" href="css/style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>

<body>
<div class="header">
    <div class="container">
        <div class="navbar">
            <div class="logo">
                <img src="pic/logo.png" width="125px">
            </div>
            <nav>
                <ul>
                    <li><a href="main-page.html">Main page</a></li>
                    <li><a href="">Product</a></li>
                    <li><a href="cart-page.html">Cart</a></li>
                </ul>
            </nav>
        </div>
    </div>

 <div class="container-1">
        <form class="filter">
            <div class="item">
                <label for="">Category</label>
                <select name="category">
                    <option value="">---</option>
                    <option value="">Electronic</option>
                    <option value="">Mobile Phone</option>
                    <option value="">Television</option>
                    <option value="">Shoes</option>
                </select>
            </div>
            <div class="item">
                <label for="">Warehouse</label>
                <select name="wid">
                    <option value="">---</option>
                    <option value="">1</option>
                    <option value="">2</option>
                    <option value="">3</option>
                </select>
            </div>
            <div class="item">
                <label for="">Name</label>
                <input type="text" name="name">
            </div>
            <div class="item">
                <label for="">Min Price</label>
                <input type="text" name="minPrice" placeholder="0">
            </div>
            <div class="item">
                <label for="">Max Price</label>
                <input type="number" name="maxPrice">
            </div>

            <div class="item submit">
                <button>Search</button>
            </div>

            <div class="filter-condition">
                <span>View As a</span>
                <select name="" id="select">
                    <option value="Default">Default</option>
                    <option value="LowToHigh">Low to high</option>
                    <option value="HighToLow">High to low</option>
                </select>
            </div>
        </form>
        
<div class="countResults">
            Found <b id="count">loading...</b> results
        </div>

        <div class="products"></div>
    </div>

    </div>
    <script>
        fetch('http://localhost:3001/product')
            .then(response => response.json())
            .then(data => {
                const countElement = document.getElementById('count');
                const productsContainer = document.querySelector('.products');

                // Update the count
                countElement.textContent = ` ${data.length}`;

                // Update the product list
                data.forEach(product => {
                    const productDiv = document.createElement('div');
                    productDiv.classList.add('item');

                    // Create an object to store product data
                    const productData = {
                        title: ` Title: ${product.title}`,
                        description: `Description: ${product.description}`,
                        price: `Price: $${parseFloat(product.price).toFixed(2)}`,
                        category: `Category: ${product.category}`,
                        wid: `Warehouse ID: ${product.wid}`
                    };

                    // Create and append HTML elements for product data
                    for (const key in productData) {
                        const element = document.createElement('p');
                        element.textContent = productData[key];
                        productDiv.appendChild(element);
                    }

                    // Append the product to the product list
                    productsContainer.appendChild(productDiv);
                });
            })
            .catch(error => {
                console.error('Error fetching data:', error);
            });
    </script>
</div>
  
<script src="script/search.js"></script>
<script src="script/sort.js"></script>

</body>
</html>